# ๐ฆ ุฅุนุฏุงุฏ Railway Volume ููุตูุฑ - ุฏููู ูุงูู

## ๐ฏ ุงููุดููุฉ

Railway ูุณุชุฎุฏู **Ephemeral Storage** (ุชุฎุฒูู ูุคูุช) - ุฃู ุงููููุงุช ุงููุฑููุนุฉ ุชูุญุฐู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู.

**ุงูุญู:** ุงุณุชุฎุฏุงู **Railway Volume** (ุชุฎุฒูู ุฏุงุฆู) ูุญูุธ ุงูุตูุฑ ุจุดูู ุฏุงุฆู.

---

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ (5-7 ุฏูุงุฆู)

### 1๏ธโฃ ุฅูุดุงุก Volume ูู Railway

1. ุงุฐูุจ ุฅูู: **https://railway.app/dashboard**
2. ุงุฎุชุฑ ูุดุฑูุนู: **t-event-production**
3. ูู ุงููุงุฆูุฉ ุงูููููุ ุงุถุบุท **+ New** โ **Volume**
4. ูู ุงูุฅุนุฏุงุฏุงุช:
   - **Name:** `t-event-uploads` (ุฃู ุฃู ุงุณู ุชุฑูุฏู)
   - **Mount Path:** `/app/public/uploads`
   - **Size:** `1 GB` (ูุงููุฉ ูุขูุงู ุงูุตูุฑ)

5. ุงุถุบุท **Create**

---

### 2๏ธโฃ ุฑุจุท Volume ุจุงูุฎุฏูุฉ (Service)

ุจุนุฏ ุฅูุดุงุก ุงูู Volume:

1. ุงุถุบุท ุนูู ุงูู Volume ุงูุฐู ุฃูุดุฃุชู
2. ุงุฐูุจ ุฅูู **Settings**
3. ูู ูุณู **Service**ุ ุงุฎุชุฑ ุฎุฏูุชู ุงูุฑุฆูุณูุฉ (t-event)
4. ุชุฃูุฏ ุฃู **Mount Path** ูู: `/app/public/uploads`

---

### 3๏ธโฃ ุฅุนุงุฏุฉ Deploy

ุจุนุฏ ุฑุจุท ุงูู Volume:

1. Railway ุณูุนูุฏ Deploy ุชููุงุฆูุงู
2. ุงูุชุธุฑ 2-3 ุฏูุงุฆู
3. ุฑุงูุจ **Logs** ููุชุฃูุฏ ูู ูุฌุงุญ Deploy

ูู ุงูู Logs ูุฌุจ ุฃู ุชุดุงูุฏ:
```
โ Server ready on http://0.0.0.0:3000
โ Database connected
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ 1: ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ

1. ุงูุชุญ ุงูุชุทุจูู ูู ููุจุงูู ููุธู
2. ุงุฐูุจ ุฅูู **ูุฑุงูุง ุงููููุฉ**
3. ุงูุชูุท ุตูุฑุฉ ูุงุฑูุนูุง
4. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ "ุชู ุฑูุน ุงูุตูุฑุฉ ุจูุฌุงุญ"

### ุงุฎุชุจุงุฑ 2: ุงูุชุญูู ูู ููุญุฉ ุงูุชุญูู

1. ุงูุชุญ: https://t-event-production.up.railway.app/admin/photos
2. ุงุฎุชุฑ **ููุฏ ุงูุงูุชุธุงุฑ**
3. **ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑุฉ!** โ
4. ุงุถุบุท **ุงุนุชูุงุฏ**

### ุงุฎุชุจุงุฑ 3: ูุนุฑุถ ุงูุตูุฑ

1. ุงูุชุญ: https://t-event-production.up.railway.app/gallery
2. **ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑุฉ ุงููุนุชูุฏุฉ!** โ

### ุงุฎุชุจุงุฑ 4: ุงูุฏููููุฉ (ุฃูู ุงุฎุชุจุงุฑ!)

1. ูู Railway Dashboardุ ุงุฐูุจ ูู **Deployments**
2. ุงุถุบุท **Restart** (ุฅุนุงุฏุฉ ุชุดุบูู)
3. ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบููุ ุงูุชุญ **ูุนุฑุถ ุงูุตูุฑ** ูุฑุฉ ุฃุฎุฑู
4. **ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑ ุงููุฏููุฉ!** โ (ูุฐุง ูุนูู ุงูู Volume ูุนูู)

---

## ๐ ุงูุชุญูู ูู ุงูุชุซุจูุช ุงูุตุญูุญ

### ูู Railway Logs:

ุงูุชุญ **Railway โ Deployments โ Logs** ูุงุจุญุซ ุนู:

```bash
โ Server ready on http://0.0.0.0:3000
โ Next.js production mode
โ Database connected
```

### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

ุงูุชุญ **Railway โ PostgreSQL โ Query** ููู ุจุชุดุบูู:

```sql
SELECT id, employee_number, image_url, is_approved, created_at
FROM shared_photos
ORDER BY created_at DESC
LIMIT 5;
```

ูุฌุจ ุฃู ุชุฑู URLs ูุซู:
```
/uploads/photo-15-1735056789123.jpg  โ
```

---

## ๐ ูุนูููุงุช ุนู Railway Volume

### ุงูููุฒุงุช:
- โ **ุชุฎุฒูู ุฏุงุฆู** - ุงููููุงุช ูุง ุชูุญุฐู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
- โ **ุฃุฏุงุก ุนุงูู** - SSD ุณุฑูุน
- โ **ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู** - Railway ูุญูุธ ูุณุฎ ุงุญุชูุงุทูุฉ
- โ **ุชูุณุน ุณูู** - ูููู ุฒูุงุฏุฉ ุงููุณุงุญุฉ ูุงุญูุงู

### ุงูุญุฌู ุงููุฌุงูู:
- **ุญุชู 1 GB ูุฌุงูุงู** ูู ุฎุทุฉ Hobby
- **ูุงููุฉ ูู:** 2000-3000 ุตูุฑุฉ (ุจุนุฏ ุงูุถุบุท)
- **ุงูุชูููุฉ ุงูุฅุถุงููุฉ:** $0.25/GB/ุดูุฑ ุฅุฐุง ุงุญุชุฌุช ุฃูุซุฑ

### ูุณุงุฑ ุงูุชุฎุฒูู:
```
/app/public/uploads/photo-{employee_number}-{timestamp}.jpg
```

**ูุซุงู:**
```
/app/public/uploads/photo-15-1735056789123.jpg
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ุงูุตูุฑ ูุง ุชูุฑูุน

**ุงูุณุจุจ ุงููุญุชูู:** Volume ุบูุฑ ูุฑุจูุท ุจุงูุฎุฏูุฉ

**ุงูุญู:**
1. ุงุฐูุจ ุฅูู Railway โ Volumes
2. ุงุถุบุท ุนูู ุงูู Volume
3. ุชุญูู ูู ุฃู **Service** ูุฑุจูุท ุจู t-event
4. ุชุญูู ูู ุฃู **Mount Path** ูู `/app/public/uploads`

---

### ูุดููุฉ: ุงูุตูุฑ ุชูุญุฐู ุจุนุฏ Restart

**ุงูุณุจุจ ุงููุญุชูู:** Mount Path ุฎุงุทุฆ

**ุงูุญู:**
1. ุชุญูู ูู ุฃู **Mount Path** ูู **ุจุงูุถุจุท**: `/app/public/uploads`
2. **ููุณ:** `/uploads` ุฃู `public/uploads`
3. ูุฌุจ ุฃู ูุจุฏุฃ ุจู `/app/`

---

### ูุดููุฉ: ุฎุทุฃ "ENOSPC: no space left on device"

**ุงูุณุจุจ:** ุงูุชูุฃ ุงูู Volume

**ุงูุญู:**
1. ุงุฐูุจ ุฅูู Railway โ Volumes
2. ุงุถุบุท ุนูู ุงูู Volume
3. ุงุถุบุท **Resize**
4. ุฒูุฏ ุงูุญุฌู (ูุซูุงู ูู 1GB ุฅูู 2GB)

---

### ูุดููุฉ: ุงูุตูุฑ ุงููุฏููุฉ (ูู ูุจู Volume) ูุง ุชุนูู

**ุงูุณุจุจ:** ุงูุตูุฑ ุงููุฏููุฉ ูุงูุช ูุญููุธุฉ ูู ุชุฎุฒูู ูุคูุช

**ุงูุญู:** ุญุฐู ุงูุตูุฑ ุงููุฏููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุงูุชุญ **Railway โ PostgreSQL โ Query** ูููุฐ:

```sql
-- ุญุฐู ุงูุตูุฑ ุงููุฏููุฉ ุงูุชู ูุง ุชุนูู
BEGIN;

-- ุญุฐู ุงูุฅุนุฌุงุจุงุช ุฃููุงู (ุจุณุจุจ Foreign Key)
DELETE FROM photo_likes
WHERE photo_id IN (
    SELECT id FROM shared_photos
    WHERE image_url LIKE '/uploads/%'
    AND created_at < NOW() - INTERVAL '1 hour'  -- ุงูุตูุฑ ุงูุฃูุฏู ูู ุณุงุนุฉ
);

-- ุญุฐู ุงูุตูุฑ ุงููุฏููุฉ
DELETE FROM shared_photos
WHERE image_url LIKE '/uploads/%'
AND created_at < NOW() - INTERVAL '1 hour';  -- ุงูุตูุฑ ุงูุฃูุฏู ูู ุณุงุนุฉ

COMMIT;

-- ุงูุชุญูู ูู ุงููุชูุฌุฉ
SELECT COUNT(*) as remaining_photos FROM shared_photos;
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

ูุจู ุงุนุชุจุงุฑ ุงูุฅุนุฏุงุฏ ููุชููุงูุ ุชุฃูุฏ ูู:

- [ ] Volume ุชู ุฅูุดุงุคู ูู Railway
- [ ] Mount Path ูู `/app/public/uploads`
- [ ] Volume ูุฑุจูุท ุจุฎุฏูุฉ t-event
- [ ] Deploy ูุฌุญ ุจุฏูู ุฃุฎุทุงุก
- [ ] ุชู ุฑูุน ุตูุฑุฉ ุงุฎุชุจุงุฑูุฉ ุจูุฌุงุญ
- [ ] ุงูุตูุฑุฉ ุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู
- [ ] ุงูุตูุฑุฉ ุชุธูุฑ ูู ูุนุฑุถ ุงูุตูุฑ
- [ ] ุจุนุฏ Restartุ ุงูุตูุฑุฉ ูุง ุฒุงูุช ููุฌูุฏุฉ โ

---

## ๐ ุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:

1. ุงูุชุญ **Railway โ Deployments โ Logs**
2. ุงูุชูุท ุตูุฑุฉ ููุฃุฎุทุงุก (ุฅู ูุฌุฏุช)
3. ุงูุชุญ **Railway โ Volumes**
4. ุงูุชูุท ุตูุฑุฉ ููุฅุนุฏุงุฏุงุช
5. ุฃุฑุณู ูู ุงูุชูุงุตูู

---

## ๐ ุงูุฅุนุฏุงุฏ ุงููุงูู!

ุจุนุฏ ุฅุนุฏุงุฏ Volume ุจูุฌุงุญ:

- โ ุงูุตูุฑ ุชูุฎุฒู ุจุดูู **ุฏุงุฆู**
- โ ูู ุชูุญุฐู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
- โ ุฃุฏุงุก ุณุฑูุน ูุน SSD
- โ ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู
- โ ุฌุงูุฒ ููุฅูุชุงุฌ! ๐

---

**ุงูุฅุตุฏุงุฑ:** v17 (Railway Volume Edition)
**ุงูุชุงุฑูุฎ:** 2024-12-24
**ุงูููุช ุงููุชููุน:** 5-7 ุฏูุงุฆู
**ุงูุชูููุฉ:** ูุฌุงูู (ุญุชู 1 GB)
