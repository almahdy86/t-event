-- ๐ง ุฅุตูุงุญ ุณุฑูุน ููุดููุฉ ุงูุตูุฑ

-- โ๏ธ ูุฐุง ุงูุณูุฑูุจุช ูุญุฐู ุฌููุน ุงูุตูุฑ ุงููุฏููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
-- ุงุณุชุฎุฏูู ููุท ุฅุฐุง ูุงูุช ุงูุตูุฑ ุงููุฏููุฉ ูุง ุชุนูู

-- 1๏ธโฃ ุญุฐู ุฌููุน ุงูุตูุฑ ุงููุฏููุฉ (ูุณุงุฑุงุช /uploads/)
-- ููุฐ ูุฐุง ูู Railway Query:

BEGIN;

-- ุญุฐู ุงูุฅุนุฌุงุจุงุช ุฃููุงู (ุจุณุจุจ Foreign Key)
DELETE FROM photo_likes
WHERE photo_id IN (
    SELECT id FROM shared_photos
    WHERE image_url LIKE '/uploads/%'
);

-- ุญุฐู ุงูุตูุฑ ุงููุฏููุฉ
DELETE FROM shared_photos
WHERE image_url LIKE '/uploads/%';

COMMIT;

-- 2๏ธโฃ ุงูุชุญูู ูู ุงููุชูุฌุฉ
SELECT COUNT(*) as remaining_photos FROM shared_photos;

-- ูุฌุจ ุฃู ูููู 0 ุฅุฐุง ูู ููู ููุงู ุตูุฑ ูู Cloudinary ุจุนุฏ

-- โ ุจุนุฏ ุชูููุฐ ูุฐุง ุงูุณูุฑูุจุช:
-- 1. ุฃุถู ูุชุบูุฑุงุช Cloudinary ูู Railway
-- 2. ุงูุชุธุฑ ุฅุนุงุฏุฉ Deploy (2-3 ุฏูุงุฆู)
-- 3. ุฌุฑุจ ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ
-- 4. ูุฌุจ ุฃู ุชุนูู ุจุดูู ุตุญูุญ!
